{% extends "layouts/base.html" %}
{% block title %}{{ category.name }}{{ block.super }}{% endblock %}
{% block meta_description %}
    {{ category.short_description }}
{% endblock meta_description %}
{% block breadcrumb %}
    {% include "partials/breadcrumb.html" %}
{% endblock %}
{% block content %}
    {% load i18n %}
    {% include 'documentation/partials/title_and_shortdesc.html' with obj=category user=user only %}
    {% if category.description %}
        <section class="s-section">
            <div class="s-section__container container">
                <div class="s-section__row row">{% include 'documentation/partials/image_and_desc.html' with obj=category only %}</div>
            </div>
        </section>
    {% endif %}
    {% if tags %}
        <section class="s-section">
            <div class="s-section__container container">
                <div class="s-section__row row">
                    <div class="s-section__col col-12">
                        <div class="c-box">
                            <div class="container-fluid d-flex justify-content-center mb-3">Afficher les fiches contenant l'Ã©tiquette</div>
                            <div class="container-fluid d-flex justify-content-center">
                                {% for tag in tags %}
                                    {% if tag.slug == active_tag_slug %}
                                        <button id="filterdocument-{{ tag.slug }}"
                                                hx-target="#documents_area"
                                                hx-swap="outerHTML"
                                                hx-get="#"
                                                class="tag bg-info text-white matomo-event"
                                                data-bs-toggle="tooltip"
                                                data-bs-placement="top"
                                                data-bs-title="Supprimer ce filtre"
                                                aria-label="Supprimer ce filtre"
                                                data-matomo-category="engagement"
                                                data-matomo-action="unfilter"
                                                data-matomo-option="document">
                                            <i class="ri-close-fill ri-xs"></i>{{ tag.name }}
                                        </button>
                                    {% else %}
                                        <button id="filterdocument-{{ tag.slug }}"
                                                hx-target="#documents_area"
                                                hx-swap="outerHTML"
                                                hx-get="#"
                                                class="tag bg-info-lighter text-info matomo-event"
                                                data-matomo-category="engagement"
                                                aria-label="Filtrer par {{ tag.name }}"
                                                data-matomo-action="filter"
                                                data-matomo-option="document">{{ tag.name }}</button>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    {% endif %}
    <section class="s-section">
        <div class="s-section__container container">
            <div class="s-section__row row">
                <div class="s-section__col col-12">
                    <div class="row mt-4" id="documents">
                        {% for obj in category.documents.all %}
                            {% include 'documentation/partials/content_summary.html' with obj=obj kind='document' only %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock content %}
