{% load i18n %}
{% load str_filters %}

<div id="upvotesarea{{obj.pk}}" class="d-inline-block">
    {% with obj.upvotes_count as counter %}
        {% if user.is_authenticated %}
            <form hx-post="{% if kind == 'post' %}{% url 'forum_upvote:post' %}{% elif kind == 'forum' %}{% url 'forum_upvote:forum' %}{% endif %}"
                  id="upvote-button{{obj.pk}}"
                  hx-target="#upvotesarea{{obj.pk}}"
                  hx-swap="outerHTML">
                <input type='hidden' name='pk' value="{{obj.pk}}"/>

                <button type="submit"
                        class="btn btn-ico btn-link px-0 text-nowrap matomo-event"
                        data-matomo-category="engagement"
                        data-matomo-action="upvote"
                        data-matomo-option="post"
                >
                    <span class="mr-1">{% trans "UpVotes" %}</span>
                    <i class="{% if obj.has_upvoted %}ri-star-fill{% else %}ri-star-line{% endif %}" aria-hidden="true"></i><span class="ml-1">{{counter}}</span>
                </button>
            </form>
        {% else %}
            <a href="{% inclusion_connect_url next_url obj.id %}" class="btn btn-ico btn-link pr-0 text-nowrap" data-toggle="tooltip" data-placement="top" title="Connectez-vous pour contribuer">
                <span class="mr-1">{% trans "UpVotes" %}</span>
                <i class="{% if obj.has_upvoted %}ri-star-fill{% else %}ri-star-line{% endif %}" aria-hidden="true"></i><span class="ml-1">{{counter}}</span>
            </a>
        {% endif %}
    {% endwith %}
</div>
